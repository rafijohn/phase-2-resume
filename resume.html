<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Resume Building</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="main1">

      <div class="left">

      </div>

      <div class="right">

      </div>

    </div>

  </body>
</html>

<script type="text/javascript">
  var userdata=window.location.search.substring(1).split("&");
  for (var i = 0; i < userdata.length; i++) {
    var dt=userdata[i].split("=")
    console.log(dt);
  }
  console.log(dt[1]);

  // indexedDB
  var request;
  var open;
  var store;
  var result;
  var tx;
  var indexedDB=window.indexedDB || window.webkitIndexedDB ||window.mozIndexedDB || window.msIndexedDB;
    request=indexedDB.open("mydatabase",1); // here 1 is version
    // onerror
    request.onerror=function(e){
     console.log("error"+e);
    }
    // onupgradeneeded
    request.onupgradeneeded=function(e){
      result=e.target.result;
      store=result.createObjectStore("resume",{keyPath:"name"});
    }
    //onsuccess
    request.onsuccess=function(e){
      result=e.target.result;
      tx=result.transaction("resume",'readwrite');
      store=tx.objectStore("resume");

      var info=store.get(dt[1]);
      info.onsuccess=function(e) {
        var finalresult=e.target.result;
        console.log(finalresult);
        personalinfo(finalresult);
        career(finalresult);
        education(finalresult.education);
      }
    }
    var left=document.querySelector(".left");
    //personalinformation
    function personalinfo(pi){
      var image=document.createElement("img");
      image.src="images/user.svg";
      image.alt=pi.name;      // here pi is function parameter
      left.append(image);    //we can use append or appendChild

      var name=document.createElement("h1");
      name.textContent=pi.name;    //name from form.html
      left.appendChild(name);

      var mobile=document.createElement("h4");
      mobile.textContent=pi.mobile;    //mobile from form.html
      left.appendChild(mobile);

      var email=document.createElement("h4");
      email.textContent=pi.email;    //email from form.html
      left.appendChild(email);
    }

    // right div
      var right=document.querySelector(".right");
      //career information
      function career(ca){
        var heading=document.createElement("h1");
        heading.textContent="Career Objective";
        right.appendChild(heading);

        var hr=document.createElement("hr");
        // hr.textContent=ca.hr;
        right.appendChild(hr);

        var career=document.createElement("p");
        career.textContent=ca.career;
        right.appendChild(career);
      }
      // education details
        function education(edu){
          var heading=document.createElement("h1");
          heading.textContent="Education details";
          right.appendChild(heading);

          var hr=document.createElement("hr");
          right.appendChild(hr);

          var ul=document.createElement("ul");
          right.appendChild(ul);
          for(var i in edu){
            var li=document.createElement("li");
            li.textContent=edu[i].course;
            ul.appendChild(li);

            var branch=document.createElement("p");
            branch.textContent=edu[i].branch;
            li.appendChild(branch);

            var institute=document.createElement("p");
            institute.textContent=edu[i].institute;
            li.appendChild(institute);

            var year=document.createElement("p");
            year.textContent=edu[i].year;
            li.appendChild(year);

            var per=document.createElement("p");
            per.textContent=edu[i].per;
            li.appendChild(per);
            }
        }
</script>
